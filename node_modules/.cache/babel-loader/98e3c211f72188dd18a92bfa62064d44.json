{"ast":null,"code":"var _jsxFileName = \"/Users/calving/Desktop/mod5/gallerySevenFront/src/components/App.js\";\nimport React from 'react';\nimport { Switch, Route, withRouter, Redirect } from 'react-router-dom';\nimport SignUp from './SignUp';\nimport Login from './Login';\nimport NavBar from './NavBar';\nimport Profile from './Profile';\nimport PostContainer from './PostContainer';\nimport PostPage from \"./PostPage\";\nimport Filter from \"./Filter\";\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      currentUser: null,\n      collection: [],\n      categories: [],\n      allCollection: [],\n      filtered: false\n    };\n\n    this.updateUser = newUser => {\n      this.setState({\n        currentUser: newUser\n      });\n    };\n\n    this.handleLogin = currentUser => {\n      this.setState({\n        currentUser\n      }, () => {\n        this.props.history.push('/profile');\n      });\n    };\n\n    this.handleLogout = () => {\n      fetch(\"http://localhost:3000/logout\", {\n        credentials: \"include\"\n      }).then(resp => resp.json()).then(() => {\n        this.setState({\n          currentUser: null\n        }, () => {\n          this.props.history.push('/');\n        });\n      });\n    };\n\n    this.handleViews = obj => {\n      let newViewCount = parseInt(obj.views) + 1;\n      let newObject = obj;\n      newObject.views = newViewCount;\n      let targetPost = this.state.collection.filter(object => object.id !== obj.id);\n      let newCollection = [newObject, ...targetPost];\n      fetch(`http://localhost:3000/posts/${obj.id}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          views: newViewCount\n        })\n      }).then(resp => resp.json()).then(obj => {\n        this.setState(prevState => ({\n          collection: newCollection\n        }));\n      });\n    };\n\n    this.handleAddingNewImageToCollection = obj => {\n      let newObject = obj;\n      let copyOfCollection = this.state.collection;\n      let newCollection = [newObject, ...copyOfCollection];\n      this.setState(prevState => ({\n        collection: newCollection\n      }));\n      this.props.history.push('/');\n    };\n\n    this.selectedCategory = category => {\n      let copyOfCollection = this.state.collection;\n      let copyOfAllCollection = this.state.allCollection;\n      let results = copyOfCollection.filter(obj => obj.category.kind === category);\n\n      if (category === \"All\") {\n        this.setState(prevState => ({\n          collection: copyOfAllCollection\n        }));\n      } else if (this.state.filtered === false) {\n        this.setState(prevState => ({\n          collection: results,\n          filtered: true\n        }));\n      } else if (this.state.filtered === true) {\n        this.setState(prevState => ({\n          collection: this.state.allCollection,\n          filtered: false\n        }));\n        this.setState(prevState => ({\n          collection: results,\n          filtered: true\n        }));\n      }\n\n      this.handleTitle(category);\n    };\n\n    this.handleTitle = category => {\n      if (category === \"All\") {\n        return \"Gallery Seven\";\n      } else {\n        return category;\n      }\n    };\n  }\n\n  componentDidMount() {\n    fetch(\"http://localhost:3000/autologin\", {\n      credentials: \"include\"\n    }).then(resp => {\n      if (resp.ok) {\n        return resp.json();\n      } else {\n        throw Error(\"Not logged in!\");\n      }\n    }).then(user => {\n      this.handleLogin(user);\n    }).catch(err => console.error(err));\n    fetch(\"http://localhost:3000/posts\").then(resp => resp.json()).then(obj => {\n      this.setState(prevState => ({\n        collection: obj,\n        allCollection: obj\n      }));\n    });\n    fetch(\"http://localhost:3000/categories\").then(resp => resp.json()).then(obj => {\n      this.setState(prevState => ({\n        categories: obj\n      }));\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(NavBar, {\n      currentUser: this.state.currentUser,\n      handleLogout: this.handleLogout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"main\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      path: \"/signup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(SignUp, {\n      handleLogin: this.handleLogin,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Route, {\n      path: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Login, {\n      handleLogin: this.handleLogin,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Route, {\n      path: \"/profile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 13\n      }\n    }, this.state.currentUser ? /*#__PURE__*/React.createElement(Profile, {\n      currentUser: this.state.currentUser,\n      updateUser: this.updateUser,\n      handleAddingNewImageToCollection: this.handleAddingNewImageToCollection,\n      collection: this.state.collection,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 41\n      }\n    }) : /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 89\n      }\n    })), /*#__PURE__*/React.createElement(Route, {\n      path: \"/home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 13\n      }\n    }, this.state.currentUser ? /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"welcome\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 41\n      }\n    }, \"Welcome to Gallery Seven \", this.state.currentUser.username) : /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 131\n      }\n    })), /*#__PURE__*/React.createElement(Route, {\n      path: \"/posts/:id\",\n      component: PostPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"welcome\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Filter, {\n      categories: this.state.categories,\n      selectedCategory: this.selectedCategory,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"collectionContainerHeader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 17\n      }\n    }, this.handleTitle), /*#__PURE__*/React.createElement(PostContainer, {\n      objects: this.state.collection,\n      handleViews: this.handleViews,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }\n    }))))));\n  }\n\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/calving/Desktop/mod5/gallerySevenFront/src/components/App.js"],"names":["React","Switch","Route","withRouter","Redirect","SignUp","Login","NavBar","Profile","PostContainer","PostPage","Filter","App","Component","state","currentUser","collection","categories","allCollection","filtered","updateUser","newUser","setState","handleLogin","props","history","push","handleLogout","fetch","credentials","then","resp","json","handleViews","obj","newViewCount","parseInt","views","newObject","targetPost","filter","object","id","newCollection","method","headers","body","JSON","stringify","prevState","handleAddingNewImageToCollection","copyOfCollection","selectedCategory","category","copyOfAllCollection","results","kind","handleTitle","componentDidMount","ok","Error","user","catch","err","console","error","render","username"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Switch, Route, withRouter, Redirect } from 'react-router-dom'\nimport SignUp from './SignUp'\nimport Login from './Login'\nimport NavBar from './NavBar'\nimport Profile from './Profile'\nimport PostContainer from './PostContainer'\nimport PostPage from \"./PostPage\"\nimport Filter from \"./Filter\"\n\n\n\n\n\nclass App extends React.Component {\n  state = {\n    currentUser: null,\n    collection:[],\n    categories:[],\n    allCollection:[],\n    filtered: false\n  }\n\n\n  componentDidMount() {\n    fetch(\"http://localhost:3000/autologin\", {\n      credentials: \"include\"\n    })\n      .then(resp => {\n        if (resp.ok) {\n          return resp.json()\n        } else {\n          throw Error(\"Not logged in!\")\n        }\n      })\n      .then(user => {\n        this.handleLogin(user)\n      })\n      .catch((err) => console.error(err))\n\n    fetch(\"http://localhost:3000/posts\")\n    .then(resp => resp.json())\n    .then((obj) => {\n      this.setState((prevState) => ({\n        collection:obj,\n        allCollection:obj\n      }))\n    })\n    fetch(\"http://localhost:3000/categories\")\n    .then(resp => resp.json())\n    .then((obj) => {\n      this.setState((prevState) => ({\n        categories:obj\n      }))\n    })\n  }\n\n  updateUser = newUser => {\n    this.setState({ currentUser: newUser })\n  }\n\n  handleLogin = currentUser => {\n    this.setState({ currentUser }, () => {\n      this.props.history.push('/profile')\n    })\n  }\n\n  handleLogout = () => {\n    fetch(\"http://localhost:3000/logout\", {\n      credentials: \"include\"\n    })\n      .then(resp => resp.json())\n      .then(() => {\n        this.setState({ currentUser: null }, () => {\n          this.props.history.push('/')\n        })\n      })\n  }\n\n  handleViews = (obj) =>{\n    let newViewCount = parseInt(obj.views) + 1\n    let newObject = obj\n    newObject.views = newViewCount\n    let targetPost = this.state.collection.filter(object => object.id !==obj.id)\n    let newCollection = [newObject, ...targetPost]\n\n    fetch(`http://localhost:3000/posts/${obj.id}`, {\n      method:\"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        views:newViewCount\n      })\n    })\n    .then(resp => resp.json())\n    .then((obj) => {\n      this.setState((prevState) => ({\n        collection :newCollection\n      }))\n    })\n  }\n\n  handleAddingNewImageToCollection = (obj) => {\n    let newObject = obj\n    let copyOfCollection = this.state.collection\n    let newCollection = [newObject, ...copyOfCollection]\n    this.setState((prevState) => ({\n      collection:newCollection\n    }))\n      this.props.history.push('/')\n  }\n\n  selectedCategory = (category) => {\n    let copyOfCollection = this.state.collection\n    let copyOfAllCollection = this.state.allCollection\n    let results = copyOfCollection.filter(obj => obj.category.kind ===category)\n    if (category === \"All\"){\n      this.setState((prevState) => ({\n        collection:copyOfAllCollection\n      }))\n    }else if (this.state.filtered === false){\n      this.setState((prevState) => ({\n        collection:results,\n        filtered:true\n      }))\n    } else if (this.state.filtered === true){\n      this.setState((prevState) => ({\n        collection:this.state.allCollection,\n        filtered:false\n      }))\n      this.setState((prevState) => ({\n        collection:results,\n        filtered:true\n      }))\n    }\n    this.handleTitle(category)\n  }\n\n  handleTitle = (category) =>{\n    if (category === \"All\" ){\n      return \"Gallery Seven\"\n    } else {\n      return category\n    }\n  }\n\n  render() {\n\n\n    return (\n      <>\n        <NavBar currentUser={this.state.currentUser} handleLogout={this.handleLogout} />\n\n        <main>\n\n          <Switch>\n\n            <Route path=\"/signup\">\n              <SignUp handleLogin={this.handleLogin} />\n            </Route>\n\n            <Route path=\"/login\">\n              <Login handleLogin={this.handleLogin} />\n            </Route>\n\n            <Route path=\"/profile\">\n              {this.state.currentUser ? <Profile currentUser={this.state.currentUser}\n                                                 updateUser={this.updateUser}\n                                                 handleAddingNewImageToCollection={this.handleAddingNewImageToCollection}\n                                                 collection={this.state.collection}/> : <Redirect to='/' />}\n            </Route>\n\n            <Route path=\"/home\">\n              {this.state.currentUser ? <h1 className=\"welcome\">Welcome to Gallery Seven {this.state.currentUser.username}</h1> : <Redirect to='/' />}\n            </Route>\n\n            <Route path=\"/posts/:id\" component={PostPage} />\n\n\n            <Route path=\"/\">\n              <div className=\"welcome\">\n              <Filter categories={this.state.categories} selectedCategory={this.selectedCategory}/>\n                <h1 className=\"collectionContainerHeader\">{this.handleTitle}</h1>\n                <PostContainer objects={this.state.collection} handleViews={this.handleViews}/>\n              </div >\n            </Route>\n\n          </Switch>\n\n\n        </main>\n      </>\n    );\n  }\n}\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}