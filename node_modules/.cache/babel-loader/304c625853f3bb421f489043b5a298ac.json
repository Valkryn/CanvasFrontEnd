{"ast":null,"code":"var _jsxFileName = \"/Users/calving/Desktop/mod5/gallerySevenFront/src/components/App.js\";\nimport React from 'react';\nimport { Switch, Route, withRouter, Redirect } from 'react-router-dom';\nimport SignUp from './SignUp';\nimport Login from './Login';\nimport NavBar from './NavBar';\nimport Profile from './Profile';\nimport PostContainer from './PostContainer'; // import '../index.css';\n// import ImageUpload from \"./ImageUpload\"\n\nimport PostPage from \"./PostPage\";\nimport Filter from \"./Filter\";\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      currentUser: null,\n      collection: [],\n      categories: []\n    };\n\n    this.updateUser = newUser => {\n      this.setState({\n        currentUser: newUser\n      });\n    };\n\n    this.handleLogin = currentUser => {\n      // set current user, then redirect to home page\n      this.setState({\n        currentUser\n      }, () => {\n        this.props.history.push('/');\n      });\n    };\n\n    this.handleLogout = () => {\n      fetch(\"http://localhost:3000/logout\", {\n        credentials: \"include\"\n      }).then(resp => resp.json()).then(() => {\n        this.setState({\n          currentUser: null\n        }, () => {\n          this.props.history.push('/');\n        });\n      });\n    };\n\n    this.handleViews = obj => {\n      let newViewCount = parseInt(obj.views) + 1;\n      let newObject = obj;\n      newObject.views = newViewCount;\n      let targetPost = this.state.collection.filter(object => object.id !== obj.id);\n      let newCollection = [newObject, ...targetPost];\n      fetch(`http://localhost:3000/posts/${obj.id}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          views: newViewCount\n        })\n      }).then(resp => resp.json()).then(obj => {\n        this.setState(prevState => ({\n          collection: newCollection\n        }));\n      });\n    };\n\n    this.handleAddingNewImageToCollection = obj => {\n      let newObject = obj;\n      let copyOfCollection = this.state.collection;\n      this.setstate(prevState => ({\n        collection: [copyOfCollection, ...newObject]\n      }));\n    };\n  }\n\n  componentDidMount() {\n    fetch(\"http://localhost:3000/autologin\", {\n      credentials: \"include\"\n    }).then(resp => {\n      if (resp.ok) {\n        return resp.json();\n      } else {\n        throw Error(\"Not logged in!\");\n      }\n    }).then(user => {\n      this.handleLogin(user);\n    }).catch(err => console.error(err));\n    fetch(\"http://localhost:3000/posts\").then(resp => resp.json()).then(obj => {\n      this.setState(prevState => ({\n        collection: obj\n      }));\n    });\n    fetch(\"http://localhost:3000/categories\").then(resp => resp.json()).then(obj => {\n      this.setState(prevState => ({\n        categories: obj\n      }));\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(NavBar, {\n      currentUser: this.state.currentUser,\n      handleLogout: this.handleLogout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"main\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Filter, {\n      categories: this.state.categories,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      path: \"/signup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(SignUp, {\n      handleLogin: this.handleLogin,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Route, {\n      path: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Login, {\n      handleLogin: this.handleLogin,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Route, {\n      path: \"/profile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }\n    }, this.state.currentUser ? /*#__PURE__*/React.createElement(Profile, {\n      currentUser: this.state.currentUser,\n      updateUser: this.updateUser,\n      handleAddingNewImageToCollection: this.handleAddingNewImageToCollection,\n      collection: this.state.collection,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 41\n      }\n    }) : /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 89\n      }\n    })), /*#__PURE__*/React.createElement(Route, {\n      path: \"/home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 13\n      }\n    }, this.state.currentUser ? /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"welcome\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 41\n      }\n    }, \"Welcome to Gallery Seven \", this.state.currentUser.username) : /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 131\n      }\n    })), /*#__PURE__*/React.createElement(Route, {\n      path: \"/posts/:id\",\n      component: PostPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"welcome\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }\n    }, \"Gallery Seven\"), /*#__PURE__*/React.createElement(PostContainer, {\n      objects: this.state.collection,\n      handleViews: this.handleViews,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    }))))));\n  }\n\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/calving/Desktop/mod5/gallerySevenFront/src/components/App.js"],"names":["React","Switch","Route","withRouter","Redirect","SignUp","Login","NavBar","Profile","PostContainer","PostPage","Filter","App","Component","state","currentUser","collection","categories","updateUser","newUser","setState","handleLogin","props","history","push","handleLogout","fetch","credentials","then","resp","json","handleViews","obj","newViewCount","parseInt","views","newObject","targetPost","filter","object","id","newCollection","method","headers","body","JSON","stringify","prevState","handleAddingNewImageToCollection","copyOfCollection","setstate","componentDidMount","ok","Error","user","catch","err","console","error","render","username"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Switch, Route, withRouter, Redirect } from 'react-router-dom'\nimport SignUp from './SignUp'\nimport Login from './Login'\nimport NavBar from './NavBar'\nimport Profile from './Profile'\nimport PostContainer from './PostContainer'\n// import '../index.css';\n// import ImageUpload from \"./ImageUpload\"\nimport PostPage from \"./PostPage\"\nimport Filter from \"./Filter\"\n\n\n\n\n\nclass App extends React.Component {\n  state = {\n    currentUser: null,\n    collection:[],\n    categories:[]\n  }\n\n\n  componentDidMount() {\n    fetch(\"http://localhost:3000/autologin\", {\n      credentials: \"include\"\n    })\n      .then(resp => {\n        if (resp.ok) {\n          return resp.json()\n        } else {\n          throw Error(\"Not logged in!\")\n        }\n      })\n      .then(user => {\n        this.handleLogin(user)\n      })\n      .catch((err) => console.error(err))\n\n    fetch(\"http://localhost:3000/posts\")\n    .then(resp => resp.json())\n    .then((obj) => {\n      this.setState((prevState) => ({\n        collection:obj\n      }))\n    })\n    fetch(\"http://localhost:3000/categories\")\n    .then(resp => resp.json())\n    .then((obj) => {\n      this.setState((prevState) => ({\n        categories:obj\n      }))\n    })\n  }\n\n  updateUser = newUser => {\n    this.setState({ currentUser: newUser })\n  }\n\n  handleLogin = currentUser => {\n    // set current user, then redirect to home page\n    this.setState({ currentUser }, () => {\n      this.props.history.push('/')\n    })\n  }\n\n  handleLogout = () => {\n    fetch(\"http://localhost:3000/logout\", {\n      credentials: \"include\"\n    })\n      .then(resp => resp.json())\n      .then(() => {\n        this.setState({ currentUser: null }, () => {\n          this.props.history.push('/')\n        })\n      })\n  }\n\n  handleViews = (obj) =>{\n    let newViewCount = parseInt(obj.views) + 1\n    let newObject = obj\n    newObject.views = newViewCount\n    let targetPost = this.state.collection.filter(object => object.id !==obj.id)\n    let newCollection = [newObject, ...targetPost]\n\n    fetch(`http://localhost:3000/posts/${obj.id}`, {\n      method:\"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        views:newViewCount\n      })\n    })\n    .then(resp => resp.json())\n    .then((obj) => {\n      this.setState((prevState) => ({\n        collection :newCollection\n      }))\n    })\n  }\n\n  handleAddingNewImageToCollection = (obj) => {\n    let newObject = obj\n    let copyOfCollection = this.state.collection\n    this.setstate((prevState) => ({\n      collection:[copyOfCollection, ...newObject]\n    }))\n  }\n\n  render() {\n    return (\n      <>\n        <NavBar currentUser={this.state.currentUser} handleLogout={this.handleLogout} />\n\n        <main>\n          <div>\n            <Filter categories={this.state.categories}/>\n          </div>\n          <Switch>\n\n            <Route path=\"/signup\">\n              <SignUp handleLogin={this.handleLogin} />\n            </Route>\n\n            <Route path=\"/login\">\n              <Login handleLogin={this.handleLogin} />\n            </Route>\n\n            <Route path=\"/profile\">\n              {this.state.currentUser ? <Profile currentUser={this.state.currentUser}\n                                                 updateUser={this.updateUser}\n                                                 handleAddingNewImageToCollection={this.handleAddingNewImageToCollection}\n                                                 collection={this.state.collection}/> : <Redirect to='/' />}\n            </Route>\n\n            <Route path=\"/home\">\n              {this.state.currentUser ? <h1 className=\"welcome\">Welcome to Gallery Seven {this.state.currentUser.username}</h1> : <Redirect to='/' />}\n            </Route>\n\n            <Route path=\"/posts/:id\" component={PostPage} />\n\n\n            <Route path=\"/\">\n              <div className=\"welcome\">\n                <h1>Gallery Seven</h1>\n                <PostContainer objects={this.state.collection} handleViews={this.handleViews}/>\n              </div >\n            </Route>\n\n          </Switch>\n\n\n        </main>\n      </>\n    );\n  }\n}\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}