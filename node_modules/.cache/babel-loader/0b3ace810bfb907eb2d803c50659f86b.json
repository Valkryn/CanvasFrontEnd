{"ast":null,"code":"var _jsxFileName = \"/Users/calving/Desktop/mod5/gallerySevenFront/src/components/App.js\";\nimport React from 'react';\nimport { Switch, Route, withRouter, Redirect } from 'react-router-dom';\nimport SignUp from './SignUp';\nimport Login from './Login';\nimport NavBar from './NavBar';\nimport Profile from './Profile';\nimport PostContainer from './PostContainer'; // import '../index.css';\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      currentUser: null,\n      collection: []\n    };\n\n    this.updateUser = newUser => {\n      this.setState({\n        currentUser: newUser\n      });\n    };\n\n    this.handleLogin = currentUser => {\n      // set current user, then redirect to home page\n      this.setState({\n        currentUser\n      }, () => {\n        this.props.history.push('/home');\n      });\n    };\n\n    this.handleLogout = () => {\n      fetch(\"http://localhost:3000/logout\", {\n        credentials: \"include\"\n      }).then(resp => resp.json()).then(() => {\n        this.setState({\n          currentUser: null\n        }, () => {\n          this.props.history.push('/');\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    fetch(\"http://localhost:3000/autologin\", {\n      credentials: \"include\"\n    }).then(resp => {\n      if (resp.ok) {\n        return resp.json();\n      } else {\n        throw Error(\"Not logged in!\");\n      }\n    }).then(user => {\n      this.handleLogin(user);\n    }).catch(err => console.error(err));\n    fetch(\"http://localhost:3000/posts\").then(resp => resp.json()).then(obj => {\n      this.setState(prevState => ({\n        collection: obj\n      }));\n    });\n  }\n\n  render() {\n    console.log(this.state.currentUser);\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(NavBar, {\n      currentUser: this.state.currentUser,\n      handleLogout: this.handleLogout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"main\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      path: \"/signup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(SignUp, {\n      handleLogin: this.handleLogin,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Route, {\n      path: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Login, {\n      handleLogin: this.handleLogin,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Route, {\n      path: \"/profile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    }, this.state.currentUser ? /*#__PURE__*/React.createElement(Profile, {\n      currentUser: this.state.currentUser,\n      updateUser: this.updateUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 41\n      }\n    }) : /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 121\n      }\n    })), /*#__PURE__*/React.createElement(Route, {\n      path: \"/home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }\n    }, this.state.currentUser ? /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"welcome\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 41\n      }\n    }, \"Welcome to Gallery Seven \", this.state.currentUser.username) : /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 131\n      }\n    })), /*#__PURE__*/React.createElement(Route, {\n      path: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"welcome\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }\n    }, \"Gallery Seven\"), /*#__PURE__*/React.createElement(PostContainer, {\n      objects: this.state.collection,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }\n    }))))));\n  }\n\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/calving/Desktop/mod5/gallerySevenFront/src/components/App.js"],"names":["React","Switch","Route","withRouter","Redirect","SignUp","Login","NavBar","Profile","PostContainer","App","Component","state","currentUser","collection","updateUser","newUser","setState","handleLogin","props","history","push","handleLogout","fetch","credentials","then","resp","json","componentDidMount","ok","Error","user","catch","err","console","error","obj","prevState","render","log","username"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Switch, Route, withRouter, Redirect } from 'react-router-dom'\nimport SignUp from './SignUp'\nimport Login from './Login'\nimport NavBar from './NavBar'\nimport Profile from './Profile'\nimport PostContainer from './PostContainer'\n// import '../index.css';\n\n\n\nclass App extends React.Component {\n  state = {\n    currentUser: null,\n    collection:[]\n  }\n\n\n  componentDidMount() {\n    fetch(\"http://localhost:3000/autologin\", {\n      credentials: \"include\"\n    })\n      .then(resp => {\n        if (resp.ok) {\n          return resp.json()\n        } else {\n          throw Error(\"Not logged in!\")\n        }\n      })\n      .then(user => {\n        this.handleLogin(user)\n      })\n      .catch((err) => console.error(err))\n\n      fetch(\"http://localhost:3000/posts\")\n    .then(resp => resp.json())\n    .then((obj) => {\n      this.setState((prevState) => ({\n        collection:obj\n      }))\n    })\n  }\n\n  updateUser = newUser => {\n    this.setState({ currentUser: newUser })\n  }\n\n  handleLogin = currentUser => {\n    // set current user, then redirect to home page\n    this.setState({ currentUser }, () => {\n      this.props.history.push('/home')\n    })\n  }\n\n  handleLogout = () => {\n    fetch(\"http://localhost:3000/logout\", {\n      credentials: \"include\"\n    })\n      .then(resp => resp.json())\n      .then(() => {\n        this.setState({ currentUser: null }, () => {\n          this.props.history.push('/')\n        })\n      })\n  }\n\n  render() {\n    console.log(this.state.currentUser)\n\n    return (\n      <>\n        <NavBar currentUser={this.state.currentUser} handleLogout={this.handleLogout} />\n\n        <main>\n\n          <Switch>\n\n            <Route path=\"/signup\">\n              <SignUp handleLogin={this.handleLogin} />\n            </Route>\n\n            <Route path=\"/login\">\n              <Login handleLogin={this.handleLogin} />\n            </Route>\n\n            <Route path=\"/profile\">\n              {this.state.currentUser ? <Profile currentUser={this.state.currentUser} updateUser={this.updateUser} /> : <Redirect to='/' />}\n            </Route>\n\n            <Route path=\"/home\">\n              {this.state.currentUser ? <h1 className=\"welcome\">Welcome to Gallery Seven {this.state.currentUser.username}</h1> : <Redirect to='/' />}\n            </Route>\n\n            <Route path=\"/\">\n              <div className=\"welcome\">\n                <h1>Gallery Seven</h1>\n                <PostContainer objects={this.state.collection}/>\n              </div >\n            </Route>\n\n          </Switch>\n\n        </main>\n      </>\n    );\n  }\n}\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}